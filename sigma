local lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/Turtle-Brand/Turtle-Lib/main/source.lua"))()
local m = lib:Window("SIGMA MENU")
local players = game.Players
local plr = players.LocalPlayer
local characters = workspace:FindFirstChild("Characters")
local UserInputService = game:GetService("UserInputService")

getgenv().settings = {speedhack = false, props = false, players = false, crates = false, attack = false, noclip = false}
getgenv().play_settings = {props = false, seeker = false, taunt = false}
getgenv().keybinds = {speedhack = Enum.KeyCode.P, noclip = Enum.KeyCode.O}

local function openCrate(name)
    game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvent"):FireServer("Crates.Buy", workspace:FindFirstChild("Crates")[name])    
end

local function bindKey(action)
    m:Button("Bind Key for " .. action, function()
        m:Label("Press any key to bind for " .. action, Color3.fromRGB(255, 255, 0))
        local connection
        connection = UserInputService.InputBegan:Connect(function(input, gameProcessed)
            if not gameProcessed then
                getgenv().keybinds[action] = input.KeyCode
                m:Label(action .. " bound to: " .. tostring(input.KeyCode), Color3.fromRGB(0, 255, 0))
                connection:Disconnect()
            end
        end)
    end)
end


bindKey("speedhack")
bindKey("noclip")

-- // Main
m:Toggle("SpeedHack", false, function (bool)
    getgenv().settings.speedhack = bool
    while getgenv().settings.speedhack do
        local delta = game:GetService("RunService").Heartbeat:Wait()
        if plr.Character.Humanoid.MoveDirection.Magnitude > 0 then
            plr.Character:TranslateBy(plr.Character.Humanoid.MoveDirection * 4 * delta * 50)  -- Zwiększenie prędkości
        end
    end
end)

local noclipConnection = nil
m:Toggle("Noclip", false, function (bool)
    getgenv().settings.noclip = bool
    if getgenv().settings.noclip then
        local camera = workspace.CurrentCamera
        noclipConnection = game:GetService("RunService").RenderStepped:Connect(function()
            if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local rootPart = plr.Character.HumanoidRootPart
                local moveDirection = Vector3.new(0, 0, 0)

                if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                    moveDirection = moveDirection + camera.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                    moveDirection = moveDirection - camera.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                    moveDirection = moveDirection - camera.CFrame.RightVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                    moveDirection = moveDirection + camera.CFrame.RightVector
                end
                
                rootPart.Velocity = moveDirection * 50  -- Szybkość poruszania się w noclipie
                for _, part in pairs(plr.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
    else
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
        if plr.Character then
            for _, part in pairs(plr.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end)

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed then
        if input.KeyCode == getgenv().keybinds.speedhack then
            getgenv().settings.speedhack = not getgenv().settings.speedhack
        elseif input.KeyCode == getgenv().keybinds.noclip then
            getgenv().settings.noclip = not getgenv().settings.noclip
        end
    end
end)

m:Label("~ DZINOLD SIGMA", Color3.fromRGB(127, 143, 166))
