local lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/Turtle-Brand/Turtle-Lib/main/source.lua"))()
local m = lib:Window("SIGMA MENU")
local players = game.Players
local plr = players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

getgenv().settings = {speedhack = false, props = false, players = false, crates = false, attack = false, noclip = false, move_on_green = false, kill_players = false}

local function openCrate(name)
    game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvent"):FireServer("Crates.Buy", workspace:FindFirstChild("Crates")[name])    
end

-- // Function to kill players within range
local function killNearbyPlayers()
    for _, target in pairs(players:GetPlayers()) do
        if target ~= plr and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            local targetRoot = target.Character.HumanoidRootPart
            local playerRoot = plr.Character and plr.Character:FindFirstChild("HumanoidRootPart")

            if playerRoot then
                local distance = (playerRoot.Position - targetRoot.Position).Magnitude
                if distance <= 15 then -- Check if the player is within 15 meters
                    local humanoid = target.Character:FindFirstChild("Humanoid")
                    if humanoid then
                        humanoid.Health = 0 -- Kill the player
                    end
                end
            end
        end
    end
end

-- // Main
m:Toggle("SpeedHack", false, function (bool)
    getgenv().settings.speedhack = bool
    while getgenv().settings.speedhack do
        local delta = game:GetService("RunService").Heartbeat:Wait()
        if plr.Character.Humanoid.MoveDirection.Magnitude > 0 then
            plr.Character:TranslateBy(plr.Character.Humanoid.MoveDirection * 4 * delta * 15)  -- Zwiększenie prędkości
        end
    end
end)

local noclipConnection = nil
m:Toggle("Noclip", false, function (bool)
    getgenv().settings.noclip = bool
    if getgenv().settings.noclip then
        local camera = workspace.CurrentCamera
        noclipConnection = game:GetService("RunService").RenderStepped:Connect(function()
            if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local rootPart = plr.Character.HumanoidRootPart
                local moveDirection = Vector3.new(0, 0, 0)

                if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                    moveDirection = moveDirection + camera.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                    moveDirection = moveDirection - camera.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                    moveDirection = moveDirection - camera.CFrame.RightVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                    moveDirection = moveDirection + camera.CFrame.RightVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                    moveDirection = moveDirection + Vector3.new(0, 1, 0) 
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
                    moveDirection = moveDirection - Vector3.new(0, 1, 0) 
                end

                rootPart.Velocity = moveDirection * 15  -- Szybkość poruszania się w noclipie
                for _, part in pairs(plr.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
    else
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
        if plr.Character then
            for _, part in pairs(plr.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end)

m:Toggle("Kill Players", false, function(bool)
    getgenv().settings.kill_players = bool
    while getgenv().settings.kill_players do
        killNearbyPlayers()
        wait(1) -- Delay to avoid overwhelming the game
    end
end)

m:Label("~ DZINOLD SIGMA", Color3.fromRGB(127, 143, 166))
